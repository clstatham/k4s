!ent 0x1000
jmp %start

@hello "Hello World"

%start
    mov rg @hello
    call %printstrln
    hlt

; printstrln(str)
%printstrln
   mov bp sp
   mov rd [rg]
   and rd $0xff
   cmp rd $0
   jeq %printstrlnret
%printstrlnloop
   printc [rg]
   add rg $1
   mov rd [rg]
   and rd $0xff
   cmp rd $0
   jne %printstrlnloop
%printstrlnret
   printc $0x0a
   mov sp bp
   ret